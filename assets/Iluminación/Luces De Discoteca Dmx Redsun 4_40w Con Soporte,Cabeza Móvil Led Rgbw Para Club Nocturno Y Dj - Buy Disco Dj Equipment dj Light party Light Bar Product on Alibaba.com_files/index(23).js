(()=>{(()=>{"use strict";var y={};y.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return y.d(e,{a:e}),e},y.d=(t,e)=>{for(var a in e)y.o(e,a)&&!y.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})},y.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),y.r=t=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var P={};y.r(P),y.d(P,{BuyerAssuranceDialog:()=>Ce,TheNewFooter:()=>Le,checkShareReward:()=>xe,customizeIframeSDK:()=>Ee});const je=t=>t,A=t=>t==null,Ke=t=>A(t)||t==="",T=t=>t>9?`${t}`:`0${t}`,ne=(t=new Date)=>`${T(t.getHours())}:${T(t.getMinutes())}:${T(t.getSeconds())}.${t.getMilliseconds()}`,Ue=t=>t?new Promise(e=>{t>0&&setTimeout(e,t)}):Promise.resolve(),qe=(t,e)=>e.reduce((a,n)=>(Reflect.has(t,n)&&(a[n]=t[n]),a),{}),ze=(t={})=>{if(t instanceof FormData)return t;const e=new FormData;for(const a in t)if(Reflect.has(t,a)){const n=t[a];if(A(n))continue;if(n instanceof Blob)e.append(a,n);else{const s=typeof n=="object"?JSON.stringify(n):n;e.append(a,s)}}return e},se=["debug","success","info","warn","error"],{hostname:re,port:ie,search:oe}=typeof window<"u"?window.location:{},C=/dev|daily|test|pre-|(\d+\.\d+\.\d+\.\d+)/.test(re)||+ie>1e3||/debug/.test(oe),ce=Object.assign({debug:{color:"#999",valid:C},error:{color:"#f20",valid:!0},warn:{color:"#f90",valid:!0},info:{color:"#0cd",valid:C},success:{color:"#3b4",valid:C}},window.__loggerConfig),k=(function(){const t=e=>{const{color:a,valid:n}=ce[e]||{};return(...s)=>{if(!n||!a)return;const o=typeof s[0]=="string"?s.shift():"";console.log(`%c%s%c\u3010${e}\u3011${o}`,"color:#999",ne(),`color:${a}`,...s)}};return se.reduce((e,a)=>Object.assign(Object.assign({},e),{[a]:t(a)}),{})})(),He=(t,e)=>{if(!t)return"";if(typeof t=="string")return t;const{holdEmpty:a=!1,listHandler:n="JOIN"}=e||{},s=new URLSearchParams;return Object.keys(t).forEach(o=>{const i=t[o];if(i===""&&a)return s.set(o,"");if(!isEmpty(i)){if(!Array.isArray(i)){const f=typeof i=="object"?JSON.stringify(i):i;return s.set(o,f)}switch(n){case"REPEAT":return i.forEach(f=>s.append(o,f));case"STRINGIFY":return s.set(o,JSON.stringify(i));default:return s.set(o,i.join(","))}}}),s.toString()};function Be(t,e){return async function(a){let n=0;return await Object.assign(Object.assign({},a),{async next(s){const o=t[n++];return o?(await o.call(e,this,s),this):(delete this.next,this)}}).next()}}class le{constructor(e,a,n){this.className="ResponseError",this.message=e,this.status=a,this.response=n}toString(){return this.message}}le.displayName="ResponseError";const j={fetchError:"[FetchError] Request failed!",parseError:"[ParseError] Data parsing failed!"};async function Je(t,e={},a){var n;e=Object.assign({method:e.method||"GET",headers:e.headers||{},responseType:"json"},e);const{data:s,payload:o,search:i={},dataType:f,serializeOptions:_={},fetchErrorMessage:h}=e,r=keepProps(e,["body","cache","credentials","headers","integrity","keepalive","method","mode","redirect","referrer","referrerPolicy","signal"]),c=["POST","PUT","PATCH"].includes((n=e.method)===null||n===void 0?void 0:n.toUpperCase()),d=Object.assign(Object.assign({},i),(!c||o)&&typeof s=="object"?s:{});if(c){let m=o||s,v=m instanceof FormData;const w=m instanceof Blob||m instanceof ArrayBuffer;r.headers=Object.assign({},e.headers),f==="formData"&&!v&&(m=json2FormData(m),v=!0),w||typeof m=="string"||v?r.body=m:(r.body=JSON.stringify(m),r.headers["Content-Type"]="application/json;charset=utf-8")}else o&&(r.body=typeof o=="string"?o:JSON.stringify(o));const p=t.indexOf("?")>0?"&":"?",g=`${t}${p}${serialize(d,_)}`,u=await window.fetch(g,r).catch(m=>{throw console.warn("ERROR in fetch: ",m),new ResponseError(h||j.fetchError,-1,{})});if(u.status<200||u.status>399)throw new ResponseError(u.statusText||`Fetch Error: ${u.status}`,u.status,u);return typeof a=="function"?a(u,e):await u[e.responseType]().catch(m=>{throw console.warn(`ERROR in res.${e.responseType}(): `,m),new ResponseError(h||j.parseError,u.redirected?302:u.status,u)})}async function Ge(t){var e;t.headers=t.headers||{},t.meta=t.meta||{},!((e=t.meta)===null||e===void 0)&&e.delay&&await sleep(t.meta.delay),await t.next()}async function Ve(t){var e;const a=performance.now();logger.debug(`>> ${t.method||"GET"} ${t.api}`,t.data),await t.next();const n=performance.now()-a,s=((e=t.response)===null||e===void 0?void 0:e.success)===!1?"warn":"info";logger[s](`<< ${t.method||"GET"} ${t.api} ${n}ms`,t.response)}async function We(t){const e=t.executor||fetcher;return t.response===void 0&&(t.response=await e(t.api,t)),await t.next()}let x=null;class K{static singleton(){return x||(x=new K,x)}constructor(){this._middlewares=[],this._middlewareMap=new Map,this.use(printLogger,Number.MIN_SAFE_INTEGER),this.use(defaultPreHandler,Number.MIN_SAFE_INTEGER+10),this.use(adapter,Number.MAX_SAFE_INTEGER)}use(e,a=this._middlewares.length*10){if(typeof e!="function")throw new TypeError("middleware must be a function.");return this._middlewares.push(e),this._middlewareMap.set(e,a),this.sortMiddlewares(this._middlewares),this._invoker=void 0,this}async request(e,a,n){const{response:s}=await this.run(e,a,n);return s}run(e,a,n){if(a&&Reflect.has(a,"next"))throw new Error('Illegal property: "next"');if(n?.length){const s=this.sortMiddlewares([...this._middlewares,...n]);return createApplyChain(s,this).call(this,Object.assign({api:e},a||{}))}return this._invoker=this._invoker||createApplyChain(this._middlewares,this),this._invoker(Object.assign({api:e},a||{}))}sortMiddlewares(e){return e.forEach((a,n)=>{this._middlewareMap.get(a)===void 0&&this._middlewareMap.set(a,n*10)}),e.sort((a,n)=>this._middlewareMap.get(a)-this._middlewareMap.get(n)),e}}const ue=["app_key","target_app_key","timestamp","sign_method","sign","secret"],U="/open/api/signature",q="/open/api/submit",z="/open/api/event",H="/open/api/close",R="aidc-open-frame";let N=(function(t){return t.FETCH="FETCH",t.CUSTOM="CUSTOM",t})({});function de(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16).toUpperCase()})}function Xe(t){const e=Object.keys(t);return e.sort(),e.reduce((a,n)=>{const s=t[n];return isNullValue(s)||s===""||s instanceof Blob?a:s&&typeof s=="object"?{...a,[n]:JSON.stringify(s)}:{...a,[n]:`${s}`}},{})}function B(t="",e){let a=JSON.stringify(e);return a=window.btoa(encodeURIComponent(a)),`[OPEN_FRAME_SDK::${t}]${a}`}function J(t="",e){if(!e||typeof e!="string")return null;const a=`[OPEN_FRAME_SDK::${t}]`;if(e.indexOf(a)!==0)return null;e=e.replace(a,"");try{e=decodeURIComponent(window.atob(e));const n=JSON.parse(e);return n.sequenceId?n:null}catch(n){return console.warn("[ERROR] in decodeMessage",n),null}}function G(t,e=100){if(!t||typeof t!="string")return"";const a=t.length;return a<=e?t:`${t.substring(0,Math.ceil(e/2))}...${t.substring(a-Math.floor(e/2))}`}var me=Object.defineProperty,fe=(t,e,a)=>e in t?me(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a,b=(t,e,a)=>fe(t,typeof e!="symbol"?e+"":e,a);class V{constructor(e){b(this,"apiMap",{}),b(this,"signatureFunc",null),b(this,"closeFunc",null),b(this,"submitFunc",null),b(this,"commitEventFunc",null),b(this,"dataType"),b(this,"requestOptions",{}),b(this,"secret"),b(this,"bizName",""),this.bindMessageListener(),this.apiMap=e.apiMap||this.apiMap,this.bizName=e.bizName||"",this.signatureFunc=e.onSignature||this.signatureFunc,this.closeFunc=e.onClose||this.closeFunc,this.submitFunc=e.onSubmit||this.submitFunc,this.commitEventFunc=e.onCommitEvent||this.commitEventFunc,this.dataType=e.dataType||"json",this.requestOptions=e.requestOptions||{},this.secret=e.secret||"",window.__openFrameSDKInited=!0,window.__openFrameSDKVersion="2.0.0"}async handleFetchMessage(e,a){k.info("[MainSDK] handleFetchMessage",e,a);try{const{api:n,options:s}=a;switch(n){case q:if(this.submitFunc){const o=this.submitFunc(s);this.sendMessage({sequenceId:e,type:N.FETCH,payload:{success:o}})}else console.warn("no submitFunc avaliable");break;case z:if(this.commitEventFunc){const o=this.commitEventFunc(s);this.sendMessage({sequenceId:e,type:N.FETCH,payload:{success:o}})}else console.warn("no commitEventFunc avaliable");break;case U:if(this.signatureFunc){const o=await this.signatureFunc();this.sendMessage({sequenceId:e,type:N.FETCH,payload:o})}else throw new Error("no signatureFunc avaliable");break;case H:this.closeFunc&&(this.closeFunc(),this.sendMessage({sequenceId:e,type:N.FETCH,payload:{}}));break;default:throw new Error("invalid api")}}catch(n){this.sendMessage({sequenceId:e,type:N.FETCH,payload:{},error:n})}}sendMessage(e){const a=document.querySelectorAll("iframe");if(a.length){const n=B("MainSDK",e);k.info("[MainSDK] send message from parent window",n),a.forEach(s=>{if(s.className.includes(R)){console.log("[MainSDK] send message success");const{origin:o}=new URL(s.getAttribute("src")||"");s.contentWindow?.postMessage(n,o)}else{const o=s.contentDocument?.querySelectorAll("iframe");o&&o.length>0&&o.forEach(i=>{if(i.className.includes(R)){const{origin:f}=new URL(i.getAttribute("src")||"");i.contentWindow?.postMessage(n,f)}})}})}else return k.error("[MainSDK] frame not found, query selector: ",`.${R}`)}bindMessageListener(){window.addEventListener("message",e=>{k.info(`[MainSDK] receive message from ${e.origin}`,G(e.data));const a=J("FrameSDK",e.data);if(!a)return;const{sequenceId:n,type:s,payload:o}=a;s===N.FETCH?(delete o.bizName,this.handleFetchMessage(n,o)):k.info(`[MainSDK] message from different current bizName is ${this.bizName}`)})}}b(V,"displayName","MainSDK");var pe=Object.defineProperty,he=(t,e,a)=>e in t?pe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a,D=(t,e,a)=>he(t,typeof e!="symbol"?e+"":e,a);class ge{constructor(e,a,n){D(this,"message"),D(this,"code"),D(this,"payload"),this.message=e,this.code=a,this.payload=n}toString(){return this.message}}var ve=Object.defineProperty,_e=(t,e,a)=>e in t?ve(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a,F=(t,e,a)=>_e(t,typeof e!="symbol"?e+"":e,a);class W{constructor(e){F(this,"sequenceId",de()),F(this,"_resolve"),F(this,"_reject"),F(this,"_retry"),F(this,"_status"),F(this,"_timer"),this._resolve=e.resolve,this._reject=e.reject,this._retry=e.retry||2,this._status="pending",e.timeout&&(this._timer=setTimeout(()=>{this._retry-=1,this._retry===0?this.reject(new ge("Timeout",-1,{})):e.taskFunc()},e.timeout))}resolve(e){this._status==="pending"&&(clearTimeout(this._timer),this._status="fulfilled",this._resolve?.(e))}reject(e){this._status==="pending"&&(clearTimeout(this._timer),this._status="rejected",this._reject?.(e))}}F(W,"displayName","Task");var we=Object.defineProperty,ye=(t,e,a)=>e in t?we(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a,I=(t,e,a)=>ye(t,typeof e!="symbol"?e+"":e,a);class be{constructor(){I(this,"reservedKeys",ue),I(this,"taskCache",new Map),this.bindMessageListener()}checkInited(){return!!window.top}async getSignature(){return await this.fetchParent(U,{data:{},timeout:15e3})}async submitData(e){return await this.fetchParent(q,{data:e,timeout:3e4})}async commitEvent(e){return await this.fetchParent(z,{data:e,timeout:3e4})}async closePage(){await this.fetchParent(H,{data:{},timeout:3e4})}async fetchParent(e,a){return new Promise((n,s)=>{const o=()=>{this.sendMessage(i.sequenceId,N.FETCH,{api:e,options:a})},i=new W({resolve:n,reject:s,taskFunc:o,timeout:a?.timeout});this.taskCache.set(i.sequenceId,i),o()})}sendMessage(e,a,n){if(window.top!==window.self)try{const s=B("FrameSDK",{sequenceId:e,type:a,payload:n});k.info("[FrameSDK] send message from iframe",s),window.parent===window.top?window.top?.postMessage(s,"*"):(window.top?.postMessage(s,"*"),window.parent?.postMessage(s,"*"))}catch(s){console.warn("[ERROR] in sendMessage",s)}}bindMessageListener(){window.addEventListener("message",e=>{k.info(`[FrameSDK] receive message from ${e.origin}`,G(e.data));const a=J("MainSDK",e.data);if(!a)return;const{sequenceId:n,type:s,payload:o,error:i}=a;if(s===N.FETCH){const f=this.taskCache.get(n);i?f?.reject(i):f?.resolve(o)}})}}I(be,"displayName","FrameSDK");class Ee extends V{}function Ne(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var $={exports:{}},L={exports:{}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var a={},n=decodeURIComponent,s=encodeURIComponent;a.get=function(r,c){_(r),typeof c=="function"?c={converter:c}:c=c||{};var d=o(document.cookie,!c.raw);return(c.converter||h)(d[r])},a.set=function(r,c,d){_(r),d=d||{};var p=d.expires,g=d.domain,u=d.path;d.raw||(c=s(String(c)));var m=r+"="+c,v=p;return typeof v=="number"&&(v=new Date,v.setDate(v.getDate()+p)),v instanceof Date&&(m+="; expires="+v.toUTCString()),f(g)&&(m+="; domain="+g),f(u)&&(m+="; path="+u),d.secure&&(m+="; secure"),document.cookie=m,m},a.remove=function(r,c){return c=c||{},c.expires=new Date(0),this.set(r,"",c)};function o(r,c){var d={};if(i(r)&&r.length>0)for(var p=c?n:h,g=r.split(/;\s/g),u,m,v,w=0,M=g.length;w<M;w++){if(v=g[w].match(/([^=]+)=/i),v instanceof Array)try{u=n(v[1]),m=p(g[w].substring(v[1].length+1))}catch{}else u=n(g[w]),m="";u&&(d[u]=m)}return d}function i(r){return typeof r=="string"}function f(r){return i(r)&&r!==""}function _(r){if(!f(r))throw new TypeError("Cookie name must be a non-empty string")}function h(r){return r}e.default=a,t.exports=e.default})(L,L.exports);var Se=L.exports;(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var a=Object.assign||function(r){for(var c=1;c<arguments.length;c++){var d=arguments[c];for(var p in d)Object.prototype.hasOwnProperty.call(d,p)&&(r[p]=d[p])}return r},n=Se,s=o(n);function o(r){return r&&r.__esModule?r:{default:r}}var i={},f=function(r){this.initAttrs(r)};f.prototype={attrs:{isLoggedIn:!1,isNewUser:!1,isFirstIn:!0,country:"",firstName:"",lastName:"",serviceType:"",memberSeq:"",locale:"",buyerLocale:"",buyerSite:"",buyerCurrency:"",zipCode:""},get:function(r){return this._attrs[r]},set:function(r,c){this._attrs[r]=c},initAttrs:function(r){this._attrs=a(this.attrs,r||{})},setup:function(){var r={};if(s.default.get("xman_us_f"))for(var c=s.default.get("xman_us_f").split("&"),d=c.length;d--;){var p=c[d].split("=");r[p[0]]=p[1]}var g=s.default.get("xman_us_t"),u=s.default.get("xman_us_f"),m=s.default.get("buyer_ship_to_info"),v=/x_user=([^&"]+)/;g&&g.indexOf("sign=y")!==-1?this.set("isLoggedIn",!0):this.set("isLoggedIn",!1),u&&v.test(u)&&(u.match(v),u=RegExp.$1,u=u.split("|"),u.length>=5&&(this.set("country",u[0]),this.set("firstName",u[1].replace(/</g,"&lt;").replace(/>/g,"&gt;")),this.set("lastName",u[2].replace(/</g,"&lt;").replace(/>/g,"&gt;")),this.set("serviceType",u[3]),this.set("memberSeq",u[4])));var w=s.default.get("sc_g_cfg_f"),M={};if(typeof w=="string"&&w!=""){for(var Y=w.split("&"),Z=Y.length;Z--;){var Q=Y[Z].split("=");M[Q[0]]=Q[1]}this.set("buyerLocale",M.sc_b_locale),this.set("buyerSite",M.sc_b_site),this.set("buyerCurrency",M.sc_b_currency)}if(this.get("memberSeq")!==""&&this.set("isNewUser",!0),s.default.get("ali_intl_firstIn")===""&&this.set("isFirstIn",!0),this.set("locale",r.x_locale||s.default.get("intl_locale")||"en_US"),m){var ee=m.match(/local_country=([^&"]*)/),te=m.match(/local_zipcode=([^&"]*)/),Ae=ee?ee[1]:null,ae=te?te[1]:null;this.get("buyerSite")===Ae&&ae&&this.set("zipCode",ae)}return this}},i=new f().setup();var _=function(){var r=!0,c=s.default.get("xman_us_f");return c&&c.indexOf("x_l=1")!==-1&&(r=!1),c&&c.indexOf("x_l=0")!==-1&&(r=!0),r},h=function(){var r=!0;return i.get("memberSeq")!==""&&(i.set("isNewUser",!1),r=!1),r};e.default={isLoggedIn:i.get("isLoggedIn"),isNewUser:h(),isFirstIn:i.get("isFirstIn"),country:i.get("country"),firstName:i.get("firstName"),lastName:i.get("lastName"),serviceType:i.get("serviceType"),memberSeq:i.get("memberSeq"),serverDomain:function(){var r=void 0,c=void 0;return i.setup(),r=i.get("serviceType"),c=["gs","cgs","twgs","hkgs","cnfm"],c.indexOf(r)>-1?"hz":"us"},getIsLoggedIn:function(){i.setup();var r=i.get("isLoggedIn");return r},getIsNewUser:function(){return i.setup(),h()},getCountry:function(){return i.setup(),i.get("country")},getFirstName:function(){return i.setup(),i.get("firstName")},getLastName:function(){return i.setup(),i.get("lastName")},getServiceType:function(){return i.setup(),i.get("serviceType")},getMemberSeq:function(){return i.setup(),i.get("memberSeq")},getLocale:function(){return i.setup(),i.get("locale")},getIPData:function(r){i.getIPData(r)},getCNA:function(){return s.default.get("cna")},getCookie:function(r){return s.default.get(r)},getMemberId:function(){var r=s.default.get("ali_apache_track"),c="";return typeof r=="string"&&(r.match(/mid=([^&"]+)/),c=RegExp.$1),c},getBuyerLocale:function(){return i.setup(),i.get("buyerLocale")},getBuyerCurrency:function(){return i.setup(),i.get("buyerCurrency")},getBuyerSite:function(){return i.setup(),i.get("buyerSite")},getIsOversea:_,getZipCode:function(){return i.setup(),i.get("zipCode")}},t.exports=e.default})($,$.exports);var ke=$.exports,Fe=ke;const O=Ne(Fe);let S=null;const Me=async(t=5)=>{var e;for(let a=0;a<t;a++){if((e=window?.lib)!=null&&e.mtop)return window.lib.mtop;await new Promise(n=>setTimeout(n,3e3))}throw new Error("Failed to load mtop after maximum retries")},xe=async()=>{var t,e,a,n,s;S||(S=await Me()),((t=S?.config)==null?void 0:t.mainDomain)!=="alibaba.com"&&(S.config.prefix="acs",S.config.subDomain="h",S.config.mainDomain="alibaba.com");const o="mtop.alibaba.intl.mobile.reward.landing.product.pc.precheck",i=new URLSearchParams(window.location.search).get("ckvia"),f=((e=i?.split("_"))==null?void 0:e[1])||"";if(!f)return console.log("shareId is empty"),{preCheck:!1};const _={language:O.getLocale(),appCountry:O.getCountry(),currency:O.getBuyerCurrency(),deviceId:O.getCNA(),shareId:f},h=await S.request({api:o,ecode:0,data:_,v:"1.0"});if((n=(a=h?.data)==null?void 0:a.data)!=null&&n.popUrl&&i){const r=new URL(h.data.data.popUrl);return r.searchParams.set("ckvia",i),h.data.data.preCheck&&window.addEventListener("message",c=>{var d,p,g;c.data.type==="share-reward:show-xman"&&((g=(p=(d=window?.loadXman)==null?void 0:d.call(window))==null?void 0:p.show)==null||g.call(p))}),{...h.data.data,popUrl:r.toString()}}return(s=h?.data)==null?void 0:s.data},E=self.React;var l=y.n(E);const Oe=self.ReactDOM;function Pe(){return l().createElement(E.Fragment,null,l().createElement("div",{className:"skeleton-item"},l().createElement("div",{className:"adm-skeleton-paragraph"},l().createElement("div",{className:"adm-skeleton adm-skeleton-animated adm-skeleton-paragraph-line"}))),l().createElement("div",{className:"skeleton-item"},l().createElement("div",{className:"adm-skeleton-paragraph"},l().createElement("div",{className:"adm-skeleton adm-skeleton-animated adm-skeleton-paragraph-line"}),l().createElement("div",{className:"adm-skeleton adm-skeleton-animated adm-skeleton-paragraph-line"}),l().createElement("div",{className:"adm-skeleton adm-skeleton-animated adm-skeleton-paragraph-line"}),l().createElement("div",{className:"adm-skeleton adm-skeleton-animated adm-skeleton-paragraph-line"}),l().createElement("div",{className:"adm-skeleton adm-skeleton-animated adm-skeleton-paragraph-line"}))),l().createElement("div",{className:"skeleton-item"},l().createElement("div",{className:"adm-skeleton-paragraph"},l().createElement("div",{className:"adm-skeleton adm-skeleton-animated adm-skeleton-paragraph-line"}),l().createElement("div",{className:"adm-skeleton adm-skeleton-animated adm-skeleton-paragraph-line"}),l().createElement("div",{className:"adm-skeleton adm-skeleton-animated adm-skeleton-paragraph-line"}),l().createElement("div",{className:"adm-skeleton adm-skeleton-animated adm-skeleton-paragraph-line"}),l().createElement("div",{className:"adm-skeleton adm-skeleton-animated adm-skeleton-paragraph-line"}))),l().createElement("div",{className:"skeleton-item"},l().createElement("div",{className:"adm-skeleton-paragraph"},l().createElement("div",{className:"adm-skeleton adm-skeleton-animated adm-skeleton-paragraph-line"}),l().createElement("div",{className:"adm-skeleton adm-skeleton-animated adm-skeleton-paragraph-line"}),l().createElement("div",{className:"adm-skeleton adm-skeleton-animated adm-skeleton-paragraph-line"}),l().createElement("div",{className:"adm-skeleton adm-skeleton-animated adm-skeleton-paragraph-line"}),l().createElement("div",{className:"adm-skeleton adm-skeleton-animated adm-skeleton-paragraph-line"}))),l().createElement("div",{className:"skeleton-item"},l().createElement("div",{className:"adm-skeleton-paragraph"},l().createElement("div",{className:"adm-skeleton adm-skeleton-animated adm-skeleton-paragraph-line"}),l().createElement("div",{className:"adm-skeleton adm-skeleton-animated adm-skeleton-paragraph-line"}),l().createElement("div",{className:"adm-skeleton adm-skeleton-animated adm-skeleton-paragraph-line"}),l().createElement("div",{className:"adm-skeleton adm-skeleton-animated adm-skeleton-paragraph-line"}),l().createElement("div",{className:"adm-skeleton adm-skeleton-animated adm-skeleton-paragraph-line"}))))}function Te(t){const e=document.createElement("iframe");e.src=t,e.style.visibility="hidden",e.style.width="0",e.style.height="0",document.body.appendChild(e)}function Ce(t){const{url:e,style:a={},onClose:n=()=>{}}=t,[s,o]=(0,E.useState)(!1),[i,f]=(0,E.useState)(0),[_,h]=(0,E.useState)(t.visible),[r,c]=(0,E.useState)(!1);return(0,E.useEffect)(()=>{window.addEventListener("message",d=>{try{let{data:p}=d;typeof p=="string"&&(p=JSON.parse(p));const{from:g,event:u}=p||{};(g==="buyerAssurance"||g==="buyerTradeAssuranceServiceProcess"||g==="buyerTradeAssuranceServiceGuide")&&(u==="close"&&n(),u==="ready"&&o(!0),u==="gotoUrl"&&o(!1),u==="showModal"&&c(!0),u==="closeModal"&&c(!1))}catch{}}),Te("https://air.alibaba.com/app/sc-assets/buyer-trade-assurance/manifest.html")},[]),(0,E.useEffect)(()=>{t.visible||(o(!1),f(0),setTimeout(()=>{h(t.visible)},220),document.body.classList.remove("no-scroll")),t.visible&&(h(t.visible),f(750),document.body.classList.add("no-scroll"))},[t.visible]),(0,Oe.createPortal)(l().createElement("div",{"data-testid":"assurance-dialog",className:`buyer-assurance-dialog-mask ${r?"show-modal":""}`,onClick:()=>{r||n()},style:{display:_?"flex":"none"}},l().createElement("div",{className:"buyer-assurance-dialog",onClick:d=>{d.stopPropagation()},style:{height:i}},!s&&l().createElement("div",null,l().createElement(Pe,null),l().createElement("span",{className:"close-icon",onClick:n})),_&&e?l().createElement("iframe",{width:"640",height:`${s?750:0}`,style:a,src:e,frameBorder:"0"}):null)),document.body)}const X=function(t){const e=new RegExp(`(^| )${t}=([^;]*)(;|$)`),a=document.cookie.match(e);return a?unescape(a[2]):null},Ye=t=>{const e="sc_g_cfg_f",a={};return(X(e)||"").split("&").forEach(s=>{const o=s.split("=");a[o[0]]=o[1]}),a.sc_b_locale?.replace("_","-").toLowerCase()||t?.replace("_","-").toLowerCase()||"en-us"},Ze=()=>{const t="sc_g_cfg_f",e={};return(X(t)||"").split("&").forEach(n=>{const s=n.split("=");e[s[0]]=s[1]}),e.sc_b_locale||"en_US"};function Re(){const t=location?.host?.match(/(.*?).alibaba\.(.*?)$/);return t&&t.length>=3?`.${t[2]}`:""}function Qe(t){return t&&t.replace("{0}",`${Re()}`)}function De(){const t="2.0.0";return fetch("https://s.alicdn.com/@xconfig/header/renderFooterVersion").then(e=>e.json()).then(({footerVersion:e=t})=>e).catch(()=>t)}function Ie(t,e){return new Promise((a,n)=>{const s=document.createElement("script");s.src=t,e?s.defer=!0:s.async=!0,s.onload=()=>{a()},s.onerror=()=>{n(new Error(`loadJsError:${t}`))},document.head.appendChild(s)})}function $e(t){return new Promise((e,a)=>{const n=document.createElement("link");n.rel="stylesheet",n.href=t,n.onload=e,n.onerror=a,document.head.appendChild(n)})}function Le(t){return(0,E.useEffect)(()=>{De().then(e=>{Promise.all([$e(`https://s.alicdn.com/@g/code/npm/@alife/the-new-footer/${e}/index.css`),Ie(`https://s.alicdn.com/@g/code/npm/@alife/the-new-footer/${e}/index.js`,!0)]).then(()=>{window.renderFooter&&window.renderFooter("the-new-footer",t)})})},[]),l().createElement("div",{id:"the-new-footer",className:"the-new-footer"})}self.idDetailBizExternal=P})();})();
